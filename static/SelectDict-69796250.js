var t=Object.defineProperty,e=(e,i,s)=>(((e,i,s)=>{i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[i]=s})(e,"symbol"!=typeof i?i+"":i,s),s);import{av as i,i as s,f as a,ah as l}from"./index-005d2c4d.js";import{P as o}from"./PageBase-9170dd2b.js";class n{getDict(t){return i({url:`dict/dict/${t}`,method:"get",params:{code:t}})}dynamicDict(t){return i({url:`/common/api/${t}`,method:"get"})}}function h(t){return"function"==typeof t||"[object Object]"===Object.prototype.toString.call(t)&&!l(t)}const d=new class extends o{constructor(){super(),e(this,"props",{dictCode:String,modelValue:[String,Number,Array],disabled:{type:Boolean,default:!1},desc:String,initLoad:Boolean,isInterface:Boolean}),e(this,"emits",["change","update:modelValue"]),e(this,"api",new n),e(this,"isGet",!1),e(this,"loading",!0),e(this,"list",[]),e(this,"label",""),e(this,"value","")}created(){var t;this.value=null==(t=this.modelValue)?void 0:t.toString(),this.modelValue&&this.list.push({value:this.desc||"",text:this.value})}mounted(){this.initLoad&&this.getList()}render(){let t,e=s(a("el-select"),{modelValue:this.value,"onUpdate:modelValue":t=>this.value=t,placeholder:"请选择",size:"default",clearable:!0,loading:this.loading,"onVisible-change":this.visibleChange,disabled:this.disabled,onChange:this.change},h(t=this.list.map((t=>s(a("el-option"),{label:t.text,value:t.value,key:t.value},null))))?t:{default:()=>[t]});if(this.desc){const t=e;e=s(a("el-tooltip"),{class:"item",effect:"dark",content:this.desc,placement:"top-start"},h(e)?e:{default:()=>[t]})}return e}visibleChange(t){t&&this.getList()}async getList(){if(!this.isGet){this.loading=!0,this.isGet=!0;try{if(this.isInterface){const t=await this.api.dynamicDict(this.dictCode);this.list=t.map((t=>({text:t.text,value:t.text.toString()})))}else{const t=await this.api.getDict(this.dictCode);this.list=t.map((t=>({text:t.text,value:t.value})))}this.list}catch(t){this.isGet=!1}finally{this.loading=!1}}}change(t){this.$emit("change",t),this.$emit("update:modelValue",t)}};export{d as S};
