var e=Object.defineProperty,l=(l,a,r)=>(((l,a,r)=>{a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[a]=r})(l,"symbol"!=typeof a?a+"":a,r),r);import{P as a,M as r}from"./MyTable-9b9835b0.js";import{D as t}from"./DialogBase-b00ba37f.js";import{C as o,P as s}from"./PageBase-a3e7a0c4.js";import{a as i,i as n,f as m,b as u,A as d}from"./index-ab1010d4.js";class h extends o{constructor(){super("/api/system/v1/sysOrg")}}class c extends t{constructor(){super(),l(this,"formRef",i()),l(this,"formRules",i({}))}init(e){e&&Object.assign(this.ruleForm,e)}content(){return n(m("el-form"),{ref:this.formRef,inline:!0,model:this.ruleForm,labelWidth:"60px",labelPosition:"left",rules:this.formRules,size:"default"},{default:()=>[n("div",{class:"zh-dialog-form_formwrap"},[n(m("el-form-item"),{label:"名称",prop:"name",className:"zh-dialog-form_formitem"},{default:()=>[n(m("el-input"),{modelValue:this.ruleForm.orgName,"onUpdate:modelValue":e=>this.ruleForm.orgName=e,placeholder:"请输入名称"},null)]}),n(m("el-form-item"),{label:"简介",prop:"content",className:"zh-dialog-form_formitem"},{default:()=>[n(m("el-input"),{modelValue:this.ruleForm.orgDescribe,"onUpdate:modelValue":e=>this.ruleForm.orgDescribe=e,placeholder:"请输入"},null)]}),n(m("el-form-item"),{label:"路径",prop:"orgPath",className:"zh-dialog-form_formitem"},{default:()=>[n(m("el-input"),{modelValue:this.ruleForm.orgPath,"onUpdate:modelValue":e=>this.ruleForm.orgPath=e,placeholder:"请输入"},null)]}),n(m("el-form-item"),{label:"拼音",className:"zh-dialog-form_formitem"},{default:()=>[n(m("el-input"),{modelValue:this.ruleForm.orgPinyin,"onUpdate:modelValue":e=>this.ruleForm.orgPinyin=e,placeholder:"请输入拼音"},null)]}),n(m("el-form-item"),{label:"是否为父节点",className:"zh-dialog-form_formitem"},{default:()=>[n(m("el-select"),{modelValue:this.ruleForm.isParent,"onUpdate:modelValue":e=>this.ruleForm.isParent=e,placeholder:"请选择"},{default:()=>[n(m("el-option"),{label:"是",value:0},null),n(m("el-option"),{label:"否",value:1},null)]})]})])]})}confirm(){var e;null==(e=this.formRef.value)||e.validate((async e=>{if(!e)return;(new h).add(this.ruleForm),this.close(!0)}))}}const p=u({props:{showHighSearchBtn:{type:Boolean,default:!1}},setup(e,{slots:l,emit:a}){const r=i(!1),t=()=>{r.value=!r.value,a("showMore",r.value)};return()=>n("div",{class:"zh-search"},[n("div",{class:"form_area"},[l.form&&l.form()]),n("div",{class:"btn_area"},[e.showHighSearchBtn&&n(m("el-button"),{type:"text",class:"high-search",onClick:t},{default:()=>[d("高级搜索"),n("i",{class:["el-icon-arrow-",r.value?"up":"down"]},null)]}),n("div",{class:"btn-right"},[l.btnright&&l.btnright()])])])}}),f=new class extends s{constructor(){super(...arguments),l(this,"query",{}),l(this,"selected",[]),l(this,"api",new h),l(this,"pager",new a(this.api,this.api.page,(()=>this.query)))}created(){this.pager.refresh()}get columns(){return{orgName:{label:"名称"},orgPinyin:{label:"拼音"},name3:{label:"员工数"}}}get queryParams(){return{deptDto:{deptName:"",status:""}}}render(){return n("div",{class:"app-container"},[n(p,null,{form:()=>n(m("el-form"),{ref:"queryForm",model:this.queryParams,inline:!0},{default:()=>[n(m("el-form-item"),{class:"zs_form-item",prop:"deptName"},{default:()=>[n(m("el-input"),{modelValue:this.queryParams.deptDto.deptName,"onUpdate:modelValue":e=>this.queryParams.deptDto.deptName=e,placeholder:"部门名称",onKeyupEnter:this.handleQuery},null)]}),n("div",{class:"form_btn"},[n(m("el-button"),{plain:!0,onClick:this.handleQuery},{default:()=>[n(m("svg-icon"),{name:"search2"},null),d("搜索")]}),n(m("el-button"),{plain:!0,onClick:this.resetQuery},{default:()=>[n(m("svg-icon"),{name:"clear"},null),d("清空")]})])]}),btnright:()=>n(m("el-button"),{type:"primary",onClick:this.addHandleClick},{default:()=>[d("添加")]})}),n(r,{ref:"tableRef","row-key":"id",tableData:this.pager,columns:this.columns,actionConfig:{width:"160px"}},{actionSlot:this.actionSlot})])}actionSlot(e){return[n(m("el-button"),{type:"primary",link:!0,onClick:()=>this.addHandleClick(e.row)},{default:()=>[d("新增")]})]}async addHandleClick(e){const l=new c,a={isParent:0,orgCode:"",orgDescribe:"",orgId:"",orgLat:"",orgLevel:0,orgLng:"",orgMername:"",orgName:"",orgParent:e.orgId||0,orgPath:"",orgPinyin:"",orgSeq:0,orgSname:""};await l.show(a,{title:"新增组织机构",width:"800px"})}handleQuery(){}resetQuery(){}};export{f as default};
